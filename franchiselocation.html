<!DOCTYPE html>
<html lang="en">

<head>
    <title>Mega Able bootstrap admin template by codedthemes </title>
    <!-- HTML5 Shim and Respond.js IE10 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 10]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="Mega Able Bootstrap admin template made using Bootstrap 4 and it has huge amount of ready made feature, UI components, pages which completely fulfills any dashboard needs." />
    <meta name="keywords" content="flat ui, admin Admin , Responsive, Landing, Bootstrap, App, Template, Mobile, iOS, Android, apple, creative app">
    <meta name="author" content="codedthemes" />
    <!-- Favicon icon -->
    <link rel="icon" href="assets/images/favicon.ico" type="image/x-icon">
    <!-- Google font-->     <link href="https://fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet">
    <!-- Required Fremwork -->
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap/css/bootstrap.min.css">
    <!-- waves.css -->
    <link rel="stylesheet" href="assets/pages/waves/css/waves.min.css" type="text/css" media="all">
    <!-- themify-icons line icon -->
    <link rel="stylesheet" type="text/css" href="assets/icon/themify-icons/themify-icons.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" type="text/css" href="assets/icon/font-awesome/css/font-awesome.min.css">
    <!-- Style.css -->
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <link rel="stylesheet" type="text/css" href="assets/css/jquery.mCustomScrollbar.css">
    <!-- ico font -->
    <link rel="stylesheet" type="text/css" href="assets/icon/icofont/css/icofont.css">
    <!-- morris chart -->
    <link rel="stylesheet" type="text/css" href="assets/css/morris.js/css/morris.css">

</head>

<body>
<!-- Pre-loader start -->
<div class="theme-loader">
    <div class="loader-track">
        <div class="preloader-wrapper">
            <div class="spinner-layer spinner-blue">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="gap-patch">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>
            <div class="spinner-layer spinner-red">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="gap-patch">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>

            <div class="spinner-layer spinner-yellow">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="gap-patch">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>

            <div class="spinner-layer spinner-green">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="gap-patch">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Pre-loader end -->
<div id="pcoded" class="pcoded">
    <div class="pcoded-overlay-box"></div>
    <div class="pcoded-container navbar-wrapper">
        <nav class="navbar header-navbar pcoded-header">
            <div class="navbar-wrapper">
                <div class="navbar-logo">
                    <a class="mobile-menu waves-effect waves-light" id="mobile-collapse" href="#!">
                        <i class="ti-menu"></i>
                    </a>
                    <div class="mobile-search waves-effect waves-light">
                        <div class="header-search">
                            <div class="main-search morphsearch-search">
                                <div class="input-group">
                                    <span class="input-group-addon search-close"><i class="ti-close"></i></span>
                                    <input type="text" class="form-control" placeholder="Enter Keyword">
                                    <span class="input-group-addon search-btn"><i class="ti-search"></i></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a href="index.html">
                        <img class="img-fluid" src="assets/images/Franchise Bhoomi logo.png"style= "height: 40px; width:100px;" alt="Theme-Logo" />
                    </a>
                    <a class="mobile-options waves-effect waves-light">
                        <i class="ti-more"></i>
                    </a>
                </div>

                <div class="navbar-container container-fluid">
                    <ul class="nav-left">
                        <li>
                            <div class="sidebar_toggle"><a href="javascript:void(0)"><i class="ti-menu"></i></a></div>
                        </li>

                        <li>
                            <a href="#!" onclick="javascript:toggleFullScreen()" class="waves-effect waves-light">
                                <i class="ti-fullscreen"></i>
                            </a>
                        </li>
                    </ul>
                    <ul class="nav-right">
                        <li class="header-notification">
                            <a href="#!" class="waves-effect waves-light">
                                <i class="ti-bell"></i>
                                <span class="badge bg-c-red"></span>
                            </a>
                            <ul class="show-notification">
                                <li>
                                    <h6>Notifications</h6>
                                    <label class="label label-danger">New</label>
                                </li>
                                <li class="waves-effect waves-light">
                                    <div class="media">
                                        <img class="d-flex align-self-center img-radius" src="assets/images/avatar-2.jpg" alt="Generic placeholder image">
                                        <div class="media-body">
                                            <h5 class="notification-user">John Doe</h5>
                                            <p class="notification-msg">Lorem ipsum dolor sit amet, consectetuer elit.</p>
                                            <span class="notification-time">30 minutes ago</span>
                                        </div>
                                    </div>
                                </li>
                                <li class="waves-effect waves-light">
                                    <div class="media">
                                        <img class="d-flex align-self-center img-radius" src="assets/images/avatar-4.jpg" alt="Generic placeholder image">
                                        <div class="media-body">
                                            <h5 class="notification-user">Joseph William</h5>
                                            <p class="notification-msg">Lorem ipsum dolor sit amet, consectetuer elit.</p>
                                            <span class="notification-time">30 minutes ago</span>
                                        </div>
                                    </div>
                                </li>
                                <li class="waves-effect waves-light">
                                    <div class="media">
                                        <img class="d-flex align-self-center img-radius" src="assets/images/avatar-3.jpg" alt="Generic placeholder image">
                                        <div class="media-body">
                                            <h5 class="notification-user">Sara Soudein</h5>
                                            <p class="notification-msg">Lorem ipsum dolor sit amet, consectetuer elit.</p>
                                            <span class="notification-time">30 minutes ago</span>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </li>
                        <li class="user-profile header-notification">
                            <a href="#!" class="waves-effect waves-light">
                                <img src="assets/images/Bespoke logo.webp" class="img-radius" alt="User-Profile-Image">
                                <span>Naturals</span>
                                <i class="ti-angle-down"></i>
                            </a>
                            <ul class="show-notification profile-notification">
                                <li class="waves-effect waves-light">
                                    <a href="settings.html">
                                        <i class="ti-settings"></i> Settings
                                    </a>
                                </li>
                                <li class="waves-effect waves-light">
                                    <a href="auth-normal-sign-in.html">
                                        <i class="ti-layout-sidebar-left"></i> Logout
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="pcoded-main-container">
            <div class="pcoded-wrapper">
                <nav class="pcoded-navbar">
                    <div class="sidebar_toggle"><a href="#"><i class="icon-close icons"></i></a></div>
                    <div class="pcoded-inner-navbar main-menu">
                        <div class="">
                            <div class="main-menu-header">
                                <img class="img-80 img-radius" src="assets/images/Bespoke logo.webp" alt="User-Profile-Image">
                                <div class="user-details">
                                    <span id="more-details">Naturals</span>
                                </div>
                            </div>


                        <div class="pcoded-navigation-label" data-i18n="nav.category.navigation"></div>
                        <ul class="pcoded-item pcoded-left-item">
                            <li class="">
                                <a href="index.html" class="waves-effect waves-dark">
                                    <span class="pcoded-micon"><i class="ti-home"></i><b>D</b></span>
                                    <span class="pcoded-mtext" data-i18n="nav.dash.main">Dashboard</span>
                                    <span class="pcoded-mcaret"></span>
                                </a>
                            </li>
                        </li>
                        <li>
                            <a href="leads.html" class="waves-effect waves-dark">
                                <span class="pcoded-micon"><i class="ti-user"></i></span>
                                <span class="pcoded-mtext">Leads</span>
                                <span class="pcoded-mcaret"></span>
                            </a>
                        </li>
                        <li>
                            <a href="franchiselocation.html" class="waves-effect waves-dark">
                                <span class="pcoded-micon"><i class="ti-pin"></i></span>
                                <span class="pcoded-mtext">Locations</span>
                                <span class="pcoded-mcaret"></span>
                            </a>
                        </li>

                        <li>
                            <a href="settings.html" class="waves-effect waves-dark">
                                <span class="pcoded-micon"><i class="ti-settings"></i></span>
                                <span class="pcoded-mtext">Settings</span>
                                <span class="pcoded-mcaret"></span>
                            </a>
                        </li>     
                    </div>
                </nav>
                <div class="pcoded-content">
                    <!-- Page-header start -->
                    <div class="page-header">
                        <div class="page-block">
                            <div class="row align-items-center">
                                <div class="col-md-8">
                                    <div class="page-header-title">
                                        <h5 class="m-b-10"> 
                                            Franchise Locations</h5>
                                            <p class="m-b-0">Keep Every Franchise Outlet Organized</p>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>
                    <!-- Page-header end -->
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
                    <style>


                        body {
                            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
                            background: #f5f7fa;
                            color: #333;
                            line-height: 1.6;
                        }

                        .franchise-main-container {
                            max-width: 1400px;
                            margin: 0 auto;
                            padding: 20px;
                        }

                        .franchise-header-section {
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            color: white;
                            padding: 30px;
                            border-radius: 12px;
                            margin-bottom: 30px;
                            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
                        }

                        .franchise-header-section h1 {
                            font-size: 2.2rem;
                            font-weight: 600;
                            margin-bottom: 8px;
                        }

                        .franchise-header-section p {
                            font-size: 1.1rem;
                            opacity: 0.9;
                        }

                        /* Stats Cards */
                        .franchise-stats-grid {
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                            gap: 20px;
                            margin-bottom: 30px;
                        }

                        .franchise-stat-card {
                            background: white;
                            border-radius: 12px;
                            padding: 25px;
                            display: flex;
                            align-items: center;
                            justify-content: space-between;
                            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                            transition: transform 0.2s ease, box-shadow 0.2s ease;
                        }

                        .franchise-stat-card:hover {
                            transform: translateY(-2px);
                            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
                        }

                        .franchise-stat-info h3 {
                            font-size: 2.5rem;
                            font-weight: 700;
                            margin-bottom: 5px;
                        }

                        .franchise-stat-info p {
                            font-size: 1rem;
                            color: #666;
                            font-weight: 500;
                        }

                        .franchise-stat-icon {
                            width: 60px;
                            height: 60px;
                            border-radius: 12px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 1.8rem;
                            color: white;
                        }

                        .franchise-stat-card.franchise-stat-total {
                            border-left: 4px solid #4285f4;
                        }

                        .franchise-stat-card.franchise-stat-total .franchise-stat-info h3 {
                            color: #4285f4;
                        }

                        .franchise-stat-card.franchise-stat-total .franchise-stat-icon {
                            background: #4285f4;
                        }

                        .franchise-stat-card.franchise-stat-active {
                            border-left: 4px solid #34a853;
                        }

                        .franchise-stat-card.franchise-stat-active .franchise-stat-info h3 {
                            color: #34a853;
                        }

                        .franchise-stat-card.franchise-stat-active .franchise-stat-icon {
                            background: #34a853;
                        }

                        .franchise-stat-card.franchise-stat-closed {
                            border-left: 4px solid #ea4335;
                        }

                        .franchise-stat-card.franchise-stat-closed .franchise-stat-info h3 {
                            color: #ea4335;
                        }

                        .franchise-stat-card.franchise-stat-closed .franchise-stat-icon {
                            background: #ea4335;
                        }

                        /* Main Content */
                        .franchise-main-content {
                            background: white;
                            border-radius: 12px;
                            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                            overflow: hidden;
                        }

                        /* Filter Section */
                        .franchise-filter-section {
                            padding: 25px;
                            border-bottom: 1px solid #e8eaed;
                            background: #fafbfc;
                        }

                        .franchise-filter-header {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            margin-bottom: 20px;
                        }

                        .franchise-filter-title {
                            font-size: 1.1rem;
                            font-weight: 600;
                            color: #333;
                            border-left: 4px solid #4285f4;
                            padding-left: 12px;
                        }

                        .franchise-add-location-btn {
                            background: #4285f4;
                            color: white;
                            border: none;
                            padding: 12px 24px;
                            border-radius: 8px;
                            font-size: 0.95rem;
                            font-weight: 600;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            gap: 8px;
                            transition: all 0.2s ease;
                        }

                        .franchise-add-location-btn:hover {
                            background: #3367d6;
                            transform: translateY(-1px);
                            box-shadow: 0 4px 12px rgba(66, 133, 244, 0.3);
                        }

                        .franchise-filters-grid {
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                            gap: 20px;
                        }

                        .franchise-filter-group {
                            display: flex;
                            flex-direction: column;
                            gap: 8px;
                        }

                        .franchise-filter-label {
                            font-size: 0.9rem;
                            font-weight: 600;
                            color: #555;
                        }

                        .franchise-filter-input,
                        .franchise-filter-select {
                            padding: 12px 16px;
                            border: 1px solid #dadce0;
                            border-radius: 8px;
                            font-size: 0.95rem;
                            background: white;
                            transition: all 0.2s ease;
                        }

                        .franchise-filter-input:focus,
                        .franchise-filter-select:focus {
                            outline: none;
                            border-color: #4285f4;
                            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.1);
                        }

                        /* Table */
                        .franchise-table-container {
                            overflow-x: auto;
                        }

                        .franchise-locations-table {
                            width: 100%;
                            border-collapse: collapse;
                        }

                        .franchise-locations-table th {
                            background: #f8f9fa;
                            padding: 16px;
                            text-align: left;
                            font-weight: 600;
                            color: #5f6368;
                            font-size: 0.9rem;
                            border-bottom: 1px solid #e8eaed;
                            cursor: pointer;
                            transition: background-color 0.2s ease;
                        }

                        .franchise-locations-table th:hover {
                            background: #f1f3f4;
                        }

                        .franchise-locations-table td {
                            padding: 16px;
                            border-bottom: 1px solid #e8eaed;
                            font-size: 0.95rem;
                        }

                        .franchise-locations-table tbody tr:hover {
                            background: #f8f9fa;
                        }

                        .franchise-status-badge {
                            padding: 6px 12px;
                            border-radius: 20px;
                            font-size: 0.8rem;
                            font-weight: 600;
                            text-transform: uppercase;
                            letter-spacing: 0.5px;
                        }

                        .franchise-status-active {
                            background: #e8f5e8;
                            color: #2e7d32;
                        }

                        .franchise-status-closed {
                            background: #ffebee;
                            color: #c62828;
                        }

                        .franchise-status-on-hold {
                            background: #fff3e0;
                            color: #f57c00;
                        }

                        .franchise-action-btn {
                            background: #4285f4;
                            color: white;
                            border: none;
                            padding: 8px 16px;
                            border-radius: 6px;
                            font-size: 0.85rem;
                            cursor: pointer;
                            transition: all 0.2s ease;
                        }

                        .franchise-action-btn:hover {
                            background: #3367d6;
                            transform: translateY(-1px);
                        }

                        .franchise-no-data {
                            text-align: center;
                            padding: 60px 20px;
                            color: #5f6368;
                        }

                        .franchise-no-data-icon {
                            font-size: 3rem;
                            margin-bottom: 16px;
                            opacity: 0.4;
                        }

                        /* Sidebar Form */
                        .franchise-sidebar-overlay {
                            position: fixed;
                            top: 60px;
                            left: 0;
                            width: 100%;
                            height: calc(100% - 60px);
                            background: rgba(0, 0, 0, 0.5);
                            z-index: 1000;
                            opacity: 0;
                            visibility: hidden;
                            transition: all 0.3s ease;
                        }

                        .franchise-sidebar-overlay.franchise-sidebar-active {
                            opacity: 1;
                            visibility: visible;
                        }

                        .franchise-sidebar-panel {
                            position: fixed;
                            top: 60px;
                            right: -500px;
                            width: 480px;
                            height: calc(100% - 60px);
                            background: white;
                            box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);
                            transition: right 0.3s ease;
                            z-index: 1001;
                            display: flex;
                            flex-direction: column;
                        }

                        .franchise-sidebar-panel.franchise-sidebar-active {
                            right: 0;
                        }

                        .franchise-sidebar-header {
                            background: white;
                            color: black;
                            padding: 25px;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                        }

                        .franchise-sidebar-header h2 {
                            font-size: 1.3rem;
                            font-weight: 600;
                        }

                        .franchise-close-btn {
                            background: rgba(255, 255, 255, 0.2);
                            border: none;
                            color: black;
                            width: 36px;
                            height: 36px;
                            border-radius: 50%;
                            cursor: pointer;
                            font-size: 1.2rem;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            transition: all 0.2s ease;
                        }

                        .franchise-close-btn:hover {
                            background: rgba(255, 255, 255, 0.3);
                            transform: rotate(90deg);
                        }

                        .franchise-sidebar-content {
                            flex: 1;
                            overflow-y: auto;
                            padding: 25px;
                        }

                        .franchise-form-group {
                            margin-bottom: 20px;
                        }

                        .franchise-form-label {
                            display: block;
                            margin-bottom: 6px;
                            font-weight: 600;
                            color: #333;
                            font-size: 0.9rem;
                        }

                        .franchise-required {
                            color: #ea4335;
                        }

                        .franchise-form-input,
                        .franchise-form-textarea,
                        .franchise-form-select {
                            width: 100%;
                            padding: 12px 16px;
                            border: 1px solid #dadce0;
                            border-radius: 8px;
                            font-size: 0.95rem;
                            transition: all 0.2s ease;
                            background: white;
                        }

                        .franchise-form-input:focus,
                        .franchise-form-textarea:focus,
                        .franchise-form-select:focus {
                            outline: none;
                            border-color: #4285f4;
                            box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.1);
                        }

                        .franchise-form-textarea {
                            resize: vertical;
                            min-height: 80px;
                        }

                        .franchise-error-message {
                            color: #ea4335;
                            font-size: 0.8rem;
                            margin-top: 4px;
                            display: none;
                        }

                        .franchise-sidebar-footer {
                            padding: 20px 25px;
                            background: #f8f9fa;
                            border-top: 1px solid #e8eaed;
                            display: flex;
                            gap: 12px;
                        }

                        .franchise-btn {
                            flex: 1;
                            padding: 12px 20px;
                            border: none;
                            border-radius: 8px;
                            font-size: 0.95rem;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.2s ease;
                        }

                        .franchise-btn-primary {
                            background: #4285f4;
                            color: white;
                        }

                        .franchise-btn-primary:hover {
                            background: #3367d6;
                            transform: translateY(-1px);
                        }

                        .franchise-btn-secondary {
                            background: #f8f9fa;
                            color: #5f6368;
                            border: 1px solid #dadce0;
                        }

                        .franchise-btn-secondary:hover {
                            background: #f1f3f4;
                        }

                        /* Image Preview Styles */
                        .franchise-image-preview {
                            margin-top: 15px;
                            border: 2px dashed #dadce0;
                            border-radius: 8px;
                            padding: 15px;
                            background: #f8f9fa;
                            transition: all 0.2s ease;
                        }

                        .franchise-image-preview-header {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            margin-bottom: 10px;
                        }

                        .franchise-preview-label {
                            font-size: 0.9rem;
                            font-weight: 600;
                            color: #333;
                        }

                        .franchise-remove-image-btn {
                            background: #ea4335;
                            color: white;
                            border: none;
                            width: 24px;
                            height: 24px;
                            border-radius: 50%;
                            font-size: 0.8rem;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            transition: all 0.2s ease;
                        }

                        .franchise-remove-image-btn:hover {
                            background: #d33b2c;
                            transform: scale(1.1);
                        }

                        .franchise-image-preview img {
                            width: 100%;
                            max-width: 300px;
                            height: auto;
                            max-height: 200px;
                            object-fit: cover;
                            border-radius: 6px;
                            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                        }

                        .franchise-form-input[type="file"] {
                            padding: 8px 12px;
                            cursor: pointer;
                        }

                        .franchise-form-input[type="file"]::-webkit-file-upload-button {
                            background: #4285f4;
                            color: white;
                            border: none;
                            padding: 8px 16px;
                            border-radius: 4px;
                            margin-right: 10px;
                            cursor: pointer;
                            font-size: 0.9rem;
                            transition: background 0.2s ease;
                        }

                        .franchise-form-input[type="file"]::-webkit-file-upload-button:hover {
                            background: #3367d6;
                        }

                        /* Store image in table */
                        .franchise-store-image-thumb {
                            width: 40px;
                            height: 40px;
                            border-radius: 6px;
                            object-fit: cover;
                            border: 2px solid #e8eaed;
                            cursor: pointer;
                            transition: all 0.2s ease;
                        }

                        .franchise-store-image-thumb:hover {
                            border-color: #4285f4;
                            transform: scale(1.1);
                        }

                        .franchise-no-image-placeholder {
                            width: 40px;
                            height: 40px;
                            border-radius: 6px;
                            background: #f1f3f4;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 1.2rem;
                            color: #9aa0a6;
                            border: 2px solid #e8eaed;
                        }

                        /* Image modal */
                        .franchise-image-modal {
                            position: fixed;
                            top: 0;
                            left: 0;
                            width: 100%;
                            height: 100%;
                            background: rgba(0, 0, 0, 0.8);
                            display: none;
                            align-items: center;
                            justify-content: center;
                            z-index: 10000;
                            cursor: pointer;
                        }

                        .franchise-image-modal img {
                            max-width: 90%;
                            max-height: 90%;
                            border-radius: 8px;
                            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
                        }

                        .franchise-image-modal.franchise-modal-show {
                            display: flex;
                        }

                        /* Notification */
                        .franchise-notification {
                            position: fixed;
                            top: 20px;
                            right: 20px;
                            background: #4285f4;
                            color: white;
                            padding: 16px 24px;
                            border-radius: 8px;
                            box-shadow: 0 4px 20px rgba(66, 133, 244, 0.3);
                            z-index: 10000;
                            transform: translateX(100%);
                            transition: transform 0.3s ease;
                        }

                        .franchise-notification.franchise-notification-show {
                            transform: translateX(0);
                        }

                        .franchise-notification.franchise-notification-success {
                            background: #34a853;
                        }

                        .franchise-notification.franchise-notification-error {
                            background: #ea4335;
                        }

                        /* View Details Modal */
                        .franchise-details-modal {
                            position: fixed;
                            top: 0;
                            left: 0;
                            width: 100%;
                            height: 100%;
                            background: rgba(0, 0, 0, 0.5);
                            display: none;
                            align-items: center;
                            justify-content: center;
                            z-index: 10000;
                        }

                        .franchise-details-modal.franchise-details-modal-show {
                            display: flex;
                        }

                        .franchise-details-modal-content {
                            background: white;
                            border-radius: 12px;
                            max-width: 800px;
                            max-height: 90vh;
                            width: 90%;
                            overflow: hidden;
                            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
                        }

                        .franchise-details-modal-header {
                            background: #4285f4;
                            color: white;
                            padding: 20px;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                        }

                        .franchise-details-modal-header h2 {
                            margin: 0;
                            font-size: 1.3rem;
                            font-weight: 600;
                        }

                        .franchise-details-close-btn {
                            background: rgba(255, 255, 255, 0.2);
                            border: none;
                            color: white;
                            width: 36px;
                            height: 36px;
                            border-radius: 50%;
                            cursor: pointer;
                            font-size: 1.2rem;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            transition: all 0.2s ease;
                        }

                        .franchise-details-close-btn:hover {
                            background: rgba(255, 255, 255, 0.3);
                            transform: rotate(90deg);
                        }

                        .franchise-details-modal-body {
                            padding: 20px;
                            max-height: calc(90vh - 100px);
                            overflow-y: auto;
                        }

                        .franchise-details-grid {
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                            gap: 20px;
                            margin-bottom: 20px;
                        }

                        .franchise-details-section {
                            background: #f8f9fa;
                            border-radius: 8px;
                            padding: 20px;
                        }

                        .franchise-details-section h3 {
                            margin: 0 0 15px 0;
                            font-size: 1.1rem;
                            font-weight: 600;
                            color: #333;
                            border-bottom: 2px solid #4285f4;
                            padding-bottom: 8px;
                        }

                        .franchise-details-item {
                            margin-bottom: 12px;
                        }

                        .franchise-details-label {
                            font-weight: 600;
                            color: #555;
                            margin-bottom: 4px;
                            display: block;
                        }

                        .franchise-details-value {
                            color: #333;
                            word-break: break-word;
                        }

                        .franchise-details-image {
                            max-width: 100%;
                            height: auto;
                            border-radius: 8px;
                            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                            margin-top: 10px;
                        }

                        .franchise-details-link {
                            color: #4285f4;
                            text-decoration: none;
                            word-break: break-all;
                        }

                        .franchise-details-link:hover {
                            text-decoration: underline;
                        }

                        .franchise-details-status {
                            display: inline-block;
                            padding: 6px 12px;
                            border-radius: 20px;
                            font-size: 0.9rem;
                            font-weight: 600;
                            text-transform: uppercase;
                            letter-spacing: 0.5px;
                        }

                        .franchise-action-btn-view {
                            background: #34a853;
                            color: white;
                            border: none;
                            padding: 8px 16px;
                            border-radius: 6px;
                            font-size: 0.85rem;
                            cursor: pointer;
                            transition: all 0.2s ease;
                            margin-right: 8px;
                        }

                        .franchise-action-btn-view:hover {
                            background: #2d7e3e;
                            transform: translateY(-1px);
                        }

                        /* Phone number styling */
                        .franchise-phone-input {
                            font-family: monospace;
                            letter-spacing: 1px;
                        }

                        /* Responsive Design */
                        @media (max-width: 768px) {
                            .franchise-main-container {
                                padding: 15px;
                            }

                            .franchise-stats-grid {
                                grid-template-columns: 1fr;
                            }

                            .franchise-filter-header {
                                flex-direction: column;
                                gap: 15px;
                                align-items: stretch;
                            }

                            .franchise-filters-grid {
                                grid-template-columns: 1fr;
                            }

                            .franchise-sidebar-panel {
                                width: 100%;
                                right: -100%;
                            }

                            .franchise-table-container {
                                overflow-x: auto;
                            }

                            .franchise-locations-table {
                                min-width: 800px;
                            }
                        }
                    </style>

                    <div class="franchise-main-container">


                        <!-- Stats Cards -->
                        <div class="franchise-stats-grid">
                            <div class="franchise-stat-card franchise-stat-total">
                                <div class="franchise-stat-info">
                                    <h3 id="franchiseTotalStores">0</h3>
                                    <p>Total Franchise Locations</p>
                                </div>
                                <div class="franchise-stat-icon">üè™</div>
                            </div>
                            <div class="franchise-stat-card franchise-stat-active">
                                <div class="franchise-stat-info">
                                    <h3 id="franchiseActiveStores">0</h3>
                                    <p>Active Locations</p>
                                </div>
                                <div class="franchise-stat-icon">‚úÖ</div>
                            </div>
                            <div class="franchise-stat-card franchise-stat-closed">
                                <div class="franchise-stat-info">
                                    <h3 id="franchiseClosedStores">0</h3>
                                    <p>Closed Locations</p>
                                </div>
                                <div class="franchise-stat-icon">‚ùå</div>
                            </div>
                        </div>

                        <!-- Main Content -->
                        <div class="franchise-main-content">
                            <!-- Filter Section -->
                            <div class="franchise-filter-section">
                                <div class="franchise-filter-header">
                                    <div class="franchise-filter-title">Filter Locations</div>
                                    <button class="franchise-add-location-btn" onclick="openSidebar()">
                                        <span>+</span>
                                        Add New Location
                                    </button>
                                </div>
                                <div class="franchise-filters-grid">
                                    <div class="franchise-filter-group">
                                        <label class="franchise-filter-label">Brand</label>
                                        <select class="franchise-filter-select" id="franchiseBrandFilter">
                                            <option value="">All Brands</option>
                                        </select>
                                    </div>
                                    <div class="franchise-filter-group">
                                        <label class="franchise-filter-label">State</label>
                                        <select class="franchise-filter-select" id="franchiseStateFilter">
                                            <option value="">All States</option>
                                        </select>
                                    </div>
                                    <div class="franchise-filter-group">
                                        <label class="franchise-filter-label">City</label>
                                        <select class="franchise-filter-select" id="franchiseCityFilter">
                                            <option value="">All Cities</option>
                                        </select>
                                    </div>
                                    <div class="franchise-filter-group">
                                        <label class="franchise-filter-label">Status</label>
                                        <select class="franchise-filter-select" id="franchiseStatusFilter">
                                            <option value="">All Status</option>
                                            <option value="Active">Active</option>
                                            <option value="Closed">Closed</option>
                                            <option value="On Hold">On Hold</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Table -->
                            <div class="franchise-table-container">
                                <table class="franchise-locations-table">
                                    <thead>
                                        <tr>
                                            <th>Image</th>
                                            <th onclick="sortTable(0)">Brand Name</th>
                                            <th onclick="sortTable(1)">Store Name</th>
                                            <th onclick="sortTable(2)">Location ID</th>
                                            <th onclick="sortTable(3)">City</th>
                                            <th onclick="sortTable(4)">State</th>
                                            <th onclick="sortTable(5)">Status</th>
                                            <th onclick="sortTable(6)">Contact Person</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="franchiseLocationsTableBody">
                                        <tr>
                                            <td colspan="9" class="franchise-no-data">
                                                <div class="franchise-no-data-icon">üè™</div>
                                                <h3>No locations found</h3>
                                                <p>Add your first franchise location to get started</p>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Sidebar -->
                    <div class="franchise-sidebar-overlay" id="franchiseSidebarOverlay" onclick="closeSidebar()">
                        <div class="franchise-sidebar-panel" id="franchiseSidebarPanel" onclick="event.stopPropagation()">
                            <div class="franchise-sidebar-header">
                                <h2 id="franchiseSidebarTitle">Add New Location</h2>
                                <button class="franchise-close-btn" onclick="closeSidebar()">‚úï</button>
                            </div>

                            <form id="franchiseLocationForm" class="franchise-sidebar-content">
                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Brand Name <span class="franchise-required">*</span></label>
                                    <input type="text" class="franchise-form-input" id="franchiseBrandName" required placeholder="Enter brand name">
                                    <div class="franchise-error-message" id="franchiseBrandNameError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Franchise Code/ID <span class="franchise-required">*</span></label>
                                    <input type="text" class="franchise-form-input" id="franchiseFranchiseCode" required>
                                    <div class="franchise-error-message" id="franchiseFranchiseCodeError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Store Name <span class="franchise-required">*</span></label>
                                    <input type="text" class="franchise-form-input" id="franchiseStoreName" required>
                                    <div class="franchise-error-message" id="franchiseStoreNameError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Store Type <span class="franchise-required">*</span></label>
                                    <select class="franchise-form-select" id="franchiseStoreType" required>
                                        <option value="">Select Store Type</option>
                                        <option value="Company Owned">Company Owned</option>
                                        <option value="Franchise Owned">Franchise Owned</option>
                                        <option value="Franchise Owned Company Operated">Franchise Owned Company Operated</option>
                                        <option value="Company Owned Franchise Operated">Company Owned Franchise Operated</option>
                                    </select>
                                    <div class="franchise-error-message" id="franchiseStoreTypeError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Full Address <span class="franchise-required">*</span></label>
                                    <textarea class="franchise-form-textarea" id="franchiseFullAddress" required></textarea>
                                    <div class="franchise-error-message" id="franchiseFullAddressError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">City <span class="franchise-required">*</span></label>
                                    <input type="text" class="franchise-form-input" id="franchiseCity" required>
                                    <div class="franchise-error-message" id="franchiseCityError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">State <span class="franchise-required">*</span></label>
                                    <input type="text" class="franchise-form-input" id="franchiseState" required>
                                    <div class="franchise-error-message" id="franchiseStateError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Pincode <span class="franchise-required">*</span></label>
                                    <input type="text" class="franchise-form-input" id="franchisePincode" required maxlength="6" pattern="[0-9]{6}">
                                    <div class="franchise-error-message" id="franchisePincodeError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Contact Person Name <span class="franchise-required">*</span></label>
                                    <input type="text" class="franchise-form-input" id="franchiseContactPerson" required>
                                    <div class="franchise-error-message" id="franchiseContactPersonError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Phone Number <span class="franchise-required">*</span></label>
                                    <input type="tel" class="franchise-form-input franchise-phone-input" id="franchisePhoneNumber" required maxlength="10" pattern="[0-9]{10}" placeholder="Enter 10-digit phone number">
                                    <div class="franchise-error-message" id="franchisePhoneNumberError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">WhatsApp Number</label>
                                    <input type="tel" class="franchise-form-input franchise-phone-input" id="franchiseWhatsappNumber" maxlength="10" pattern="[0-9]{10}" placeholder="Enter 10-digit WhatsApp number">
                                    <div class="franchise-error-message" id="franchiseWhatsappNumberError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Status <span class="franchise-required">*</span></label>
                                    <select class="franchise-form-select" id="franchiseStatus" required>
                                        <option value="">Select Status</option>
                                        <option value="Active">Active</option>
                                        <option value="Closed">Closed</option>
                                        <option value="On Hold">On Hold</option>
                                    </select>
                                    <div class="franchise-error-message" id="franchiseStatusError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Opening Date <span class="franchise-required">*</span></label>
                                    <input type="date" class="franchise-form-input" id="franchiseOpeningDate" required>
                                    <div class="franchise-error-message" id="franchiseOpeningDateError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Store Image</label>
                                    <input type="file" class="franchise-form-input" id="franchiseStoreImage" accept="image/*">
                                    <div class="franchise-error-message" id="franchiseStoreImageError"></div>

                                    <!-- Image Preview -->
                                    <div class="franchise-image-preview" id="franchiseImagePreview" style="display: none;">
                                        <div class="franchise-image-preview-header">
                                            <span class="franchise-preview-label">Image Preview:</span>
                                            <button type="button" class="franchise-remove-image-btn" onclick="removeImage()">‚úï</button>
                                        </div>
                                        <img id="franchisePreviewImg" alt="Store image preview" />
                                    </div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Google Maps Link</label>
                                    <input type="url" class="franchise-form-input" id="franchiseGoogleMapsLink" placeholder="https://maps.google.com/...">
                                    <div class="franchise-error-message" id="franchiseGoogleMapsLinkError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Video Link</label>
                                    <input type="url" class="franchise-form-input" id="franchiseVideoLink" placeholder="https://youtube.com/... or video URL">
                                    <div class="franchise-error-message" id="franchiseVideoLinkError"></div>
                                </div>

                                <div class="franchise-form-group">
                                    <label class="franchise-form-label">Notes</label>
                                    <textarea class="franchise-form-textarea" id="franchiseNotes"></textarea>
                                </div>
                            </form>

                            <div class="franchise-sidebar-footer">
                                <button type="button" class="franchise-btn franchise-btn-secondary" onclick="closeSidebar()">Cancel</button>
                                <button type="submit" class="franchise-btn franchise-btn-primary" form="franchiseLocationForm">Save Location</button>
                            </div>
                        </div>
                    </div>

                    <!-- Image Modal -->
                    <div class="franchise-image-modal" id="franchiseImageModal" onclick="closeImageModal()">
                        <img id="franchiseModalImage" alt="Full size store image" />
                    </div>

                    <!-- View Details Modal -->
                    <div class="franchise-details-modal" id="franchiseDetailsModal" onclick="closeDetailsModal()">
                        <div class="franchise-details-modal-content" onclick="event.stopPropagation()">
                            <div class="franchise-details-modal-header">
                                <h2 id="franchiseDetailsModalTitle">Location Details</h2>
                                <button class="franchise-details-close-btn" onclick="closeDetailsModal()">‚úï</button>
                            </div>
                            <div class="franchise-details-modal-body" id="franchiseDetailsModalBody">
                                <!-- Details will be populated here -->
                            </div>
                        </div>
                    </div>

<script>
    // Global variables
let locations = JSON.parse(localStorage.getItem('franchiseLocations') || '[]');
let editingIndex = -1;
let sortDirection = {};

// Initialize the application
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM Content Loaded');

    // Load data from localStorage
    try {
        const savedData = localStorage.getItem('franchiseLocations');
        if (savedData) {
            locations = JSON.parse(savedData);
            console.log('Loaded locations from storage:', locations.length);
        }
    } catch (error) {
        console.error('Error loading from localStorage:', error);
        locations = [];
    }

    updateOverview();
    renderTable();
    updateFilters();
    setupEventListeners();

    console.log('Application initialized successfully');
});

// Setup event listeners
function setupEventListeners() {
    // Filter inputs
    document.getElementById('franchiseBrandFilter').addEventListener('change', filterTable);
    document.getElementById('franchiseCityFilter').addEventListener('change', filterTable);
    document.getElementById('franchiseStateFilter').addEventListener('change', filterTable);
    document.getElementById('franchiseStatusFilter').addEventListener('change', filterTable);

    // Form submission
    const form = document.getElementById('franchiseLocationForm');
    if (form) {
        form.addEventListener('submit', handleFormSubmit);
    }

    // Phone number validation - only allow numbers and limit to 10 digits
    const phoneInput = document.getElementById('franchisePhoneNumber');
    if (phoneInput) {
        phoneInput.addEventListener('input', validatePhoneNumberInput);
        phoneInput.addEventListener('keypress', allowOnlyNumbers);
    }

    const whatsappInput = document.getElementById('franchiseWhatsappNumber');
    if (whatsappInput) {
        whatsappInput.addEventListener('input', validatePhoneNumberInput);
        whatsappInput.addEventListener('keypress', allowOnlyNumbers);
    }

    // Pincode validation - only allow numbers and limit to 6 digits
    const pincodeInput = document.getElementById('franchisePincode');
    if (pincodeInput) {
        pincodeInput.addEventListener('input', validatePincodeInput);
        pincodeInput.addEventListener('keypress', allowOnlyNumbers);
    }

    // Image upload handling
    const imageInput = document.getElementById('franchiseStoreImage');
    if (imageInput) {
        imageInput.addEventListener('change', handleImageUpload);
    }

    // Real-time validation
    const inputs = document.querySelectorAll('.franchise-form-input, .franchise-form-textarea, .franchise-form-select');
    inputs.forEach(input => {
        input.addEventListener('blur', () => validateField(input));
    });

    console.log('Event listeners setup complete');
}

// Allow only numbers in input fields
function allowOnlyNumbers(e) {
    const charCode = e.which ? e.which : e.keyCode;
    if (charCode > 31 && (charCode < 48 || charCode > 57)) {
        e.preventDefault();
        return false;
    }
    return true;
}

// Validate phone number input (only numbers, max 10 digits)
function validatePhoneNumberInput(e) {
    let value = e.target.value.replace(/\D/g, ''); // Remove all non-digits
    value = value.substring(0, 10); // Limit to 10 digits
    e.target.value = value;
}

// Validate pincode input (only numbers, max 6 digits)
function validatePincodeInput(e) {
    let value = e.target.value.replace(/\D/g, ''); // Remove all non-digits
    value = value.substring(0, 6); // Limit to 6 digits
    e.target.value = value;
}

// Format date for display (DD/MM/YYYY format)
function formatDateForDisplay(dateString) {
    if (!dateString) return '';
    const date = new Date(dateString);
    const day = String(date.getDate()).padStart(2, '0');
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const year = date.getFullYear();
    return `${day}/${month}/${year}`;
}

// Open sidebar for adding/editing
function openSidebar(index = -1) {
    editingIndex = index;
    const overlay = document.getElementById('franchiseSidebarOverlay');
    const sidebar = document.getElementById('franchiseSidebarPanel');
    const title = document.getElementById('franchiseSidebarTitle');

    if (index >= 0) {
        title.textContent = 'Edit Location';
        populateForm(locations[index]);
    } else {
        title.textContent = 'Add New Location';
        document.getElementById('franchiseLocationForm').reset();
        hideImagePreview();
    }

    overlay.classList.add('franchise-sidebar-active');
    sidebar.classList.add('franchise-sidebar-active');
    document.body.style.overflow = 'hidden';
}

// Close sidebar
function closeSidebar() {
    const overlay = document.getElementById('franchiseSidebarOverlay');
    const sidebar = document.getElementById('franchiseSidebarPanel');

    overlay.classList.remove('franchise-sidebar-active');
    sidebar.classList.remove('franchise-sidebar-active');
    document.body.style.overflow = 'auto';

    // Clear form and errors
    setTimeout(() => {
        document.getElementById('franchiseLocationForm').reset();
        clearErrors();
        hideImagePreview();
        editingIndex = -1;
    }, 300);
}

// Handle image upload
function handleImageUpload(e) {
    const file = e.target.files[0];
    if (!file) {
        hideImagePreview();
        return;
    }

    // Validate file type
    if (!file.type.startsWith('image/')) {
        showError('franchiseStoreImageError', 'Please select a valid image file');
        hideImagePreview();
        return;
    }

    // Validate file size (max 5MB)
    if (file.size > 5 * 1024 * 1024) {
        showError('franchiseStoreImageError', 'Image size should be less than 5MB');
        hideImagePreview();
        return;
    }

    hideError('franchiseStoreImageError');

    // Create file reader
    const reader = new FileReader();
    reader.onload = function(e) {
        showImagePreview(e.target.result);
    };
    reader.readAsDataURL(file);
}

// Show image preview
function showImagePreview(imageSrc) {
    const preview = document.getElementById('franchiseImagePreview');
    const img = document.getElementById('franchisePreviewImg');

    img.src = imageSrc;
    preview.style.display = 'block';
}

// Hide image preview
function hideImagePreview() {
    const preview = document.getElementById('franchiseImagePreview');
    const img = document.getElementById('franchisePreviewImg');

    preview.style.display = 'none';
    img.src = '';
}

// Remove image
function removeImage() {
    const imageInput = document.getElementById('franchiseStoreImage');
    imageInput.value = '';
    hideImagePreview();
    hideError('franchiseStoreImageError');
}

// Show image in modal
function showImageModal(imageSrc) {
    const modal = document.getElementById('franchiseImageModal');
    const modalImg = document.getElementById('franchiseModalImage');

    modalImg.src = imageSrc;
    modal.classList.add('franchise-modal-show');
    document.body.style.overflow = 'hidden';
}

// Close image modal
function closeImageModal() {
    const modal = document.getElementById('franchiseImageModal');
    modal.classList.remove('franchise-modal-show');
    document.body.style.overflow = 'auto';
}

// Populate form with existing data
function populateForm(location) {
    // Map the old field names to new field names
    const fieldMapping = {
        'brandName': 'franchiseBrandName',
        'franchiseCode': 'franchiseFranchiseCode',
        'storeName': 'franchiseStoreName',
        'storeType': 'franchiseStoreType',
        'fullAddress': 'franchiseFullAddress',
        'city': 'franchiseCity',
        'state': 'franchiseState',
        'pincode': 'franchisePincode',
        'contactPerson': 'franchiseContactPerson',
        'phoneNumber': 'franchisePhoneNumber',
        'whatsappNumber': 'franchiseWhatsappNumber',
        'status': 'franchiseStatus',
        'openingDate': 'franchiseOpeningDate',
        'googleMapsLink': 'franchiseGoogleMapsLink',
        'notes': 'franchiseNotes'
    };

    Object.keys(location).forEach(key => {
        const elementId = fieldMapping[key];
        if (elementId && key !== 'storeImageData') {
            const element = document.getElementById(elementId);
            if (element) {
                element.value = location[key];
            }
        }
    });

    // Handle image preview for existing locations
    if (location.storeImageData) {
        showImagePreview(location.storeImageData);
    } else {
        hideImagePreview();
    }
}

// Handle form submission
function handleFormSubmit(e) {
    e.preventDefault();

    if (!validateForm()) {
        return;
    }

    const location = {};

    // Get all form data using new IDs
    location.brandName = document.getElementById('franchiseBrandName').value.trim();
    location.franchiseCode = document.getElementById('franchiseFranchiseCode').value.trim();
    location.storeName = document.getElementById('franchiseStoreName').value.trim();
    location.storeType = document.getElementById('franchiseStoreType').value;
    location.fullAddress = document.getElementById('franchiseFullAddress').value.trim();
    location.city = document.getElementById('franchiseCity').value.trim();
    location.state = document.getElementById('franchiseState').value.trim();
    location.pincode = document.getElementById('franchisePincode').value.trim();
    location.contactPerson = document.getElementById('franchiseContactPerson').value.trim();
    location.phoneNumber = document.getElementById('franchisePhoneNumber').value.trim();
    location.whatsappNumber = document.getElementById('franchiseWhatsappNumber').value.trim();
    location.status = document.getElementById('franchiseStatus').value;
    location.openingDate = document.getElementById('franchiseOpeningDate').value;
    location.googleMapsLink = document.getElementById('franchiseGoogleMapsLink').value.trim();
    location.notes = document.getElementById('franchiseNotes').value.trim();

    // Handle image data
    const imageInput = document.getElementById('franchiseStoreImage');
    const previewImg = document.getElementById('franchisePreviewImg');

    if (imageInput.files && imageInput.files[0]) {
        // New image uploaded
        location.storeImageData = previewImg.src;
    } else if (editingIndex >= 0 && locations[editingIndex].storeImageData) {
        // Keep existing image when editing
        location.storeImageData = locations[editingIndex].storeImageData;
    }

    // Add timestamp
    location.createdAt = editingIndex >= 0 ? locations[editingIndex].createdAt : new Date().toISOString();
    location.updatedAt = new Date().toISOString();

    // Save to locations array
    if (editingIndex >= 0) {
        locations[editingIndex] = location;
    } else {
        locations.push(location);
    }

    // Save to localStorage
    try {
        localStorage.setItem('franchiseLocations', JSON.stringify(locations));
        console.log('Location saved successfully:', location);
    } catch (error) {
        console.error('Error saving to localStorage:', error);
        showNotification('Error saving location. Please try again.', 'error');
        return;
    }

    // Update UI
    updateOverview();
    renderTable();
    updateFilters();
    closeSidebar();

    // Show success message
    showNotification(editingIndex >= 0 ? 'Location updated successfully!' : 'Location added successfully!', 'success');
}

// Validate entire form
function validateForm() {
    let isValid = true;
    clearErrors();

    // Required fields validation with new IDs
    const requiredFields = [
        { id: 'franchiseBrandName', message: 'Brand name is required' },
        { id: 'franchiseFranchiseCode', message: 'Franchise code is required' },
        { id: 'franchiseStoreName', message: 'Store name is required' },
        { id: 'franchiseStoreType', message: 'Store type is required' },
        { id: 'franchiseFullAddress', message: 'Full address is required' },
        { id: 'franchiseCity', message: 'City is required' },
        { id: 'franchiseState', message: 'State is required' },
        { id: 'franchisePincode', message: 'Pincode is required' },
        { id: 'franchiseContactPerson', message: 'Contact person name is required' },
        { id: 'franchisePhoneNumber', message: 'Phone number is required' },
        { id: 'franchiseStatus', message: 'Status is required' },
        { id: 'franchiseOpeningDate', message: 'Opening date is required' }
    ];

    requiredFields.forEach(field => {
        const element = document.getElementById(field.id);
        const value = element.value.trim();

        if (!value) {
            showError(field.id + 'Error', field.message);
            isValid = false;
        }
    });

    // Validate franchise code uniqueness
    const franchiseCode = document.getElementById('franchiseFranchiseCode').value.trim();
    if (franchiseCode) {
        const existingLocation = locations.find((loc, index) => 
            loc.franchiseCode === franchiseCode && index !== editingIndex
        );
        if (existingLocation) {
            showError('franchiseFranchiseCodeError', 'This franchise code already exists');
            isValid = false;
        }
    }

    // Validate phone number format (exactly 10 digits)
    const phoneNumber = document.getElementById('franchisePhoneNumber').value.trim();
    if (phoneNumber && phoneNumber.length !== 10) {
        showError('franchisePhoneNumberError', 'Phone number must be exactly 10 digits');
        isValid = false;
    }

    // Validate WhatsApp number if provided (exactly 10 digits)
    const whatsappNumber = document.getElementById('franchiseWhatsappNumber').value.trim();
    if (whatsappNumber && whatsappNumber.length !== 10) {
        showError('franchiseWhatsappNumberError', 'WhatsApp number must be exactly 10 digits');
        isValid = false;
    }

    // Validate pincode (exactly 6 digits)
    const pincode = document.getElementById('franchisePincode').value.trim();
    if (pincode && pincode.length !== 6) {
        showError('franchisePincodeError', 'Pincode must be exactly 6 digits');
        isValid = false;
    }

    // Validate Google Maps link if provided
    const googleMapsLink = document.getElementById('franchiseGoogleMapsLink').value.trim();
    if (googleMapsLink && !isValidURL(googleMapsLink)) {
        showError('franchiseGoogleMapsLinkError', 'Please enter a valid URL');
        isValid = false;
    }

    return isValid;
}

// Validate individual field
function validateField(field) {
    const value = field.value.trim();
    const fieldId = field.id;

    // Clear previous error
    hideError(fieldId + 'Error');

    // Required field validation
    if (field.required && !value) {
        showError(fieldId + 'Error', 'This field is required');
        return false;
    }

    // Specific field validations
    switch (fieldId) {
        case 'franchisePhoneNumber':
        case 'franchiseWhatsappNumber':
            if (value && value.length !== 10) {
                showError(fieldId + 'Error', 'Must be exactly 10 digits');
                return false;
            }
            break;

        case 'franchisePincode':
            if (value && value.length !== 6) {
                showError(fieldId + 'Error', 'Must be exactly 6 digits');
                return false;
            }
            break;

        case 'franchiseGoogleMapsLink':
            if (value && !isValidURL(value)) {
                showError(fieldId + 'Error', 'Please enter a valid URL');
                return false;
            }
            break;
    }

    return true;
}

// Show error message
function showError(errorId, message) {
    const errorElement = document.getElementById(errorId);
    if (errorElement) {
        errorElement.textContent = message;
        errorElement.style.display = 'block';
    }
}

// Hide error message
function hideError(errorId) {
    const errorElement = document.getElementById(errorId);
    if (errorElement) {
        errorElement.style.display = 'none';
    }
}

// Clear all errors
function clearErrors() {
    const errorElements = document.querySelectorAll('.franchise-error-message');
    errorElements.forEach(element => {
        element.style.display = 'none';
    });
}

// Check if URL is valid
function isValidURL(string) {
    try {
        new URL(string);
        return true;
    } catch (_) {
        return false;
    }
}

// Update overview cards
function updateOverview() {
    const total = locations.length;
    const active = locations.filter(loc => loc.status === 'Active').length;
    const closed = locations.filter(loc => loc.status === 'Closed').length;

    document.getElementById('franchiseTotalStores').textContent = total;
    document.getElementById('franchiseActiveStores').textContent = active;
    document.getElementById('franchiseClosedStores').textContent = closed;
}

// Render table
function renderTable() {
    const tbody = document.getElementById('franchiseLocationsTableBody');

    if (locations.length === 0) {
        tbody.innerHTML = `
            <tr>
                <td colspan="9" class="franchise-no-data">
                    <div class="franchise-no-data-icon">üè™</div>
                    <h3>No locations found</h3>
                    <p>Add your first franchise location to get started</p>
                </td>
            </tr>
        `;
        return;
    }

    const filteredLocations = getFilteredLocations();

    if (filteredLocations.length === 0) {
        tbody.innerHTML = `
            <tr>
                <td colspan="9" class="franchise-no-data">
                    <div class="franchise-no-data-icon">üîç</div>
                    <h3>No matching locations found</h3>
                    <p>Try adjusting your filters</p>
                </td>
            </tr>
        `;
        return;
    }

    tbody.innerHTML = filteredLocations.map((location, index) => `
        <tr>
            <td>
                ${location.storeImageData ? 
                    `<img src="${location.storeImageData}" alt="Store image" class="franchise-store-image-thumb" onclick="showImageModal('${location.storeImageData}')" />` :
`<div class="franchise-no-image-placeholder"><i class="ti-gallery"></i></div>`
                }
            </td>
            <td><strong>${location.brandName}</strong></td>
            <td>${location.storeName || '-'}</td>
            <td><code>${location.franchiseCode}</code></td>
            <td>${location.city}</td>
            <td>${location.state}</td>
            <td><span class="franchise-status-badge franchise-status-${location.status.toLowerCase().replace(' ', '-')}">${location.status}</span></td>
            <td>
                <div><strong>${location.contactPerson}</strong></div>
                <div style="font-size: 0.8rem; color: #666;">${location.phoneNumber}</div>
                <div style="font-size: 0.8rem; color: #888;">Opened: ${formatDateForDisplay(location.openingDate)}</div>
            </td>
            <td>
                <button class="franchise-action-btn-view" onclick="viewLocation(${locations.indexOf(location)})">View</button>
                <button class="franchise-action-btn" onclick="editLocation(${locations.indexOf(location)})">Edit</button>
            </td>
        </tr>
    `).join('');
}

// Get filtered locations
function getFilteredLocations() {
    const brandFilter = document.getElementById('franchiseBrandFilter').value;
    const cityFilter = document.getElementById('franchiseCityFilter').value;
    const stateFilter = document.getElementById('franchiseStateFilter').value;
    const statusFilter = document.getElementById('franchiseStatusFilter').value;

    return locations.filter(location => {
        const matchesBrand = !brandFilter || location.brandName === brandFilter;
        const matchesCity = !cityFilter || location.city === cityFilter;
        const matchesState = !stateFilter || location.state === stateFilter;
        const matchesStatus = !statusFilter || location.status === statusFilter;

        return matchesBrand && matchesCity && matchesState && matchesStatus;
    });
}

// Update filter dropdowns
function updateFilters() {
    const brands = [...new Set(locations.map(loc => loc.brandName))].sort();
    const cities = [...new Set(locations.map(loc => loc.city))].sort();
    const states = [...new Set(locations.map(loc => loc.state))].sort();

    updateFilterOptions('franchiseBrandFilter', brands);
    updateFilterOptions('franchiseCityFilter', cities);
    updateFilterOptions('franchiseStateFilter', states);
}

// Update filter options
function updateFilterOptions(filterId, options) {
    const select = document.getElementById(filterId);
    const currentValue = select.value;

    // Keep the "All" option
    const firstOption = select.options[0];
    select.innerHTML = '';
    select.appendChild(firstOption);

    // Add new options
    options.forEach(option => {
        const optionElement = document.createElement('option');
        optionElement.value = option;
        optionElement.textContent = option;
        select.appendChild(optionElement);
    });

    // Restore previous value if still valid
    if (options.includes(currentValue)) {
        select.value = currentValue;
    }
}

// Filter table
function filterTable() {
    renderTable();
}

// Edit location
function editLocation(index) {
    openSidebar(index);
}

// View location details
function viewLocation(index) {
    const location = locations[index];
    showDetailsModal(location);
}

// Show details modal
function showDetailsModal(location) {
    const modal = document.getElementById('franchiseDetailsModal');
    const title = document.getElementById('franchiseDetailsModalTitle');
    const body = document.getElementById('franchiseDetailsModalBody');

    title.textContent = `${location.brandName} - ${location.storeName}`;

    body.innerHTML = `
        <div class="franchise-details-grid">
            <div class="franchise-details-section">
                <h3>Basic Information</h3>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Brand Name:</span>
                    <span class="franchise-details-value">${location.brandName || '-'}</span>
                </div>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Store Name:</span>
                    <span class="franchise-details-value">${location.storeName || '-'}</span>
                </div>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Franchise Code:</span>
                    <span class="franchise-details-value"><code>${location.franchiseCode || '-'}</code></span>
                </div>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Store Type:</span>
                    <span class="franchise-details-value">${location.storeType || '-'}</span>
                </div>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Status:</span>
                    <span class="franchise-details-status franchise-status-${(location.status || '').toLowerCase().replace(' ', '-')}">${location.status || '-'}</span>
                </div>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Opening Date:</span>
                    <span class="franchise-details-value">${formatDateForDisplay(location.openingDate) || '-'}</span>
                </div>
            </div>
            
            <div class="franchise-details-section">
                <h3>Location Details</h3>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Full Address:</span>
                    <span class="franchise-details-value">${location.fullAddress || '-'}</span>
                </div>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">City:</span>
                    <span class="franchise-details-value">${location.city || '-'}</span>
                </div>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">State:</span>
                    <span class="franchise-details-value">${location.state || '-'}</span>
                </div>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Pincode:</span>
                    <span class="franchise-details-value">${location.pincode || '-'}</span>
                </div>
                ${location.googleMapsLink ? `
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Google Maps:</span>
                    <a href="${location.googleMapsLink}" target="_blank" class="franchise-details-link">View on Google Maps</a>
                </div>
                ` : ''}
            </div>
            
            <div class="franchise-details-section">
                <h3>Contact Information</h3>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Contact Person:</span>
                    <span class="franchise-details-value">${location.contactPerson || '-'}</span>
                </div>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Phone Number:</span>
                    <span class="franchise-details-value">${location.phoneNumber || '-'}</span>
                </div>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">WhatsApp Number:</span>
                    <span class="franchise-details-value">${location.whatsappNumber || '-'}</span>
                </div>
            </div>
            
            <div class="franchise-details-section">
                <h3>Media & Additional Info</h3>
                ${location.storeImageData ? `
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Store Image:</span>
                    <img src="${location.storeImageData}" alt="Store image" class="franchise-details-image" onclick="showImageModal('${location.storeImageData}')" style="cursor: pointer;" />
                </div>
                ` : ''}
                ${location.videoLink ? `
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Video Link:</span>
                    <a href="${location.videoLink}" target="_blank" class="franchise-details-link">${location.videoLink}</a>
                </div>
                ` : ''}
                ${location.notes ? `
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Notes:</span>
                    <span class="franchise-details-value">${location.notes}</span>
                </div>
                ` : ''}
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Created:</span>
                    <span class="franchise-details-value">${location.createdAt ? new Date(location.createdAt).toLocaleString() : '-'}</span>
                </div>
                <div class="franchise-details-item">
                    <span class="franchise-details-label">Last Updated:</span>
                    <span class="franchise-details-value">${location.updatedAt ? new Date(location.updatedAt).toLocaleString() : '-'}</span>
                </div>
            </div>
        </div>
    `;

    modal.classList.add('franchise-details-modal-show');
    document.body.style.overflow = 'hidden';
}

// Close details modal
function closeDetailsModal() {
    const modal = document.getElementById('franchiseDetailsModal');
    modal.classList.remove('franchise-details-modal-show');
    document.body.style.overflow = 'auto';
}

// Sort table
function sortTable(columnIndex) {
    const headers = ['brandName', 'storeName', 'franchiseCode', 'city', 'state', 'status', 'contactPerson'];
    const sortKey = headers[columnIndex];

    if (!sortDirection[sortKey]) {
        sortDirection[sortKey] = 'asc';
    } else {
        sortDirection[sortKey] = sortDirection[sortKey] === 'asc' ? 'desc' : 'asc';
    }

    locations.sort((a, b) => {
        let aVal = a[sortKey] || '';
        let bVal = b[sortKey] || '';

        if (typeof aVal === 'string') {
            aVal = aVal.toLowerCase();
            bVal = bVal.toLowerCase();
        }

        if (sortDirection[sortKey] === 'asc') {
            return aVal > bVal ? 1 : -1;
        } else {
            return aVal < bVal ? 1 : -1;
        }
    });

    renderTable();
}

// Show notification
function showNotification(message, type = 'success') {
    // Remove existing notifications
    const existing = document.querySelector('.franchise-notification');
    if (existing) {
        existing.remove();
    }

    // Create notification element
    const notification = document.createElement('div');
    notification.className = `franchise-notification franchise-notification-${type}`;
    notification.textContent = message;

    document.body.appendChild(notification);

    // Show notification
    setTimeout(() => {
        notification.classList.add('franchise-notification-show');
    }, 100);

    // Hide after 3 seconds
    setTimeout(() => {
        notification.classList.remove('franchise-notification-show');
        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
        }, 300);
    }, 3000);
}
</script>               


<!-- Warning Section Starts -->
<!-- Older IE warning message -->
<!--[if lt IE 10]>
<div class="ie-warning">
    <h1>Warning!!</h1>
    <p>You are using an outdated version of Internet Explorer, please upgrade <br/>to any of the following web browsers
        to access this website.</p>
    <div class="iew-container">
        <ul class="iew-download">
            <li>
                <a href="http://www.google.com/chrome/">
                    <img src="assets/images/browser/chrome.png" alt="Chrome">
                    <div>Chrome</div>
                </a>
            </li>
            <li>
                <a href="https://www.mozilla.org/en-US/firefox/new/">
                    <img src="assets/images/browser/firefox.png" alt="Firefox">
                    <div>Firefox</div>
                </a>
            </li>
            <li>
                <a href="http://www.opera.com">
                    <img src="assets/images/browser/opera.png" alt="Opera">
                    <div>Opera</div>
                </a>
            </li>
            <li>
                <a href="https://www.apple.com/safari/">
                    <img src="assets/images/browser/safari.png" alt="Safari">
                    <div>Safari</div>
                </a>
            </li>
            <li>
                <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie">
                    <img src="assets/images/browser/ie.png" alt="">
                    <div>IE (9 & above)</div>
                </a>
            </li>
        </ul>
    </div>
    <p>Sorry for the inconvenience!</p>
</div>
<![endif]-->
<!-- Warning Section Ends -->
<!-- Required Jquery -->
    <script type="text/javascript" src="assets/js/jquery/jquery.min.js"></script>     <script type="text/javascript" src="assets/js/jquery-ui/jquery-ui.min.js "></script>     <script type="text/javascript" src="assets/js/popper.js/popper.min.js"></script>     <script type="text/javascript" src="assets/js/bootstrap/js/bootstrap.min.js "></script>
<!-- waves js -->
<script src="assets/pages/waves/js/waves.min.js"></script>
<!-- jquery slimscroll js -->
<script type="text/javascript" src="assets/js/jquery-slimscroll/jquery.slimscroll.js "></script>
<!-- modernizr js -->
    <script type="text/javascript" src="assets/js/SmoothScroll.js"></script>     <script src="assets/js/jquery.mCustomScrollbar.concat.min.js "></script>
<script src="assets/js/pcoded.min.js"></script>
<script src="assets/js/vertical-layout.min.js "></script>
<script src="assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
<!-- Custom js -->
<script type="text/javascript" src="assets/js/script.js"></script>

</body>

</html>


